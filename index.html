<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8">
  <title>MAPLE 가을리그</title>
  <style>
    body {
      background-color: #121212;
      color: white;
      font-family: 'Segoe UI', sans-serif;
      margin: 0;
      padding: 0;
    }

    h1 {
      text-align: center;
      padding: 1rem;
      color: #00bfff;
    }

    .top-bar {
      text-align: center;
      margin-bottom: 10px;
    }

    .turn-indicator {
      font-size: 1.3rem;
      margin-bottom: 5px;
      color: #ffd700;
    }

    .undo-button {
      background-color: #555;
      color: white;
      border: none;
      padding: 8px 16px;
      font-size: 1rem;
      cursor: pointer;
      border-radius: 4px;
      transition: background-color 0.3s;
    }

    .undo-button:hover {
      background-color: #777;
    }

    .container {
      display: flex;
      justify-content: space-between;
      padding: 20px;
    }

    .team {
      flex: 1;
      display: flex;
      flex-direction: column;
      align-items: center;
    }

    .team-name {
      font-size: 1.5rem;
      margin-bottom: 10px;
    }

    .slots {
      display: flex;
      flex-direction: column;
    }

    .slot {
      width: 160px;
      height: 40px;
      border: 2px solid #666;
      background-color: #2e2e2e;
      margin: 5px;
      display: flex;
      align-items: center;
      justify-content: center;
      box-shadow: 0 0 4px #000;
      transition: background-color 0.3s;
    }

    .slot.filled-blue {
      background-color: #00bfff;
      color: black;
      font-weight: bold;
    }

    .slot.filled-red {
      background-color: #ff4c4c;
      color: white;
      font-weight: bold;
    }

    .pick-area {
      flex: 1;
      text-align: center;
      padding: 0 20px;
    }

    .friend-list {
      display: flex;
      flex-wrap: wrap;
      justify-content: center;
    }

    .friend {
      background-color: #333;
      margin: 5px;
      padding: 10px 15px;
      border-radius: 5px;
      cursor: pointer;
      border: 1px solid #888;
      transition: background 0.2s;
    }

    .friend:hover {
      background-color: #00bfff;
      color: black;
    }

    .friend.selected {
      opacity: 0.4;
      pointer-events: none;
    }
  </style>
</head>
<body>
  <h1>MAPLE 가을리그</h1>

  <div class="top-bar">
    <div class="turn-indicator" id="turnInfo">환팀의 차례입니다</div>
    <button class="undo-button" onclick="undoPick()">↩️  실수..</button>
  </div>

  <div class="container">
    <div class="team">
      <div class="team-name">환팀</div>
      <div class="slots" id="blueSlots"></div>
    </div>

    <div class="pick-area">
      <h2>친구 목록</h2>
      <div class="friend-list" id="friendList"></div>
    </div>

    <div class="team">
      <div class="team-name">형곤팀</div>
      <div class="slots" id="redSlots"></div>
    </div>
  </div>

  <script>
    const friends = [
      '민우', '재윤', '시영', '성균', '선종', '희용',
      '용주', '현재', '재형', '인환', '동원', '물길', '재광',
      '성훈', '웅수', '택진', '동균', '소망', '문규'
    ];

    const pickSequence = [
      'blue', 'red', 'red', 'blue', 'blue', 'red', 'red',
      'blue', 'blue', 'red', 'red', 'blue', 'blue', 'red',
      'red', 'blue', 'blue', 'red' // 총 18픽 (9명씩)
    ];

    let turnIndex = 0;
    let blueCount = 0;
    let redCount = 0;

    const friendList = document.getElementById('friendList');
    const blueSlots = document.getElementById('blueSlots');
    const redSlots = document.getElementById('redSlots');
    const turnInfo = document.getElementById('turnInfo');

    const undoStack = [];

    // 슬롯 생성
    for (let i = 0; i < 9; i++) {
      const b = document.createElement('div');
      b.className = 'slot';
      b.innerText = `슬롯 ${i + 1}`;
      blueSlots.appendChild(b);

      const r = document.createElement('div');
      r.className = 'slot';
      r.innerText = `슬롯 ${i + 1}`;
      redSlots.appendChild(r);
    }

    // 친구 생성
    friends.forEach(name => {
      const btn = document.createElement('div');
      btn.className = 'friend';
      btn.innerText = name;
      btn.onclick = () => pickFriend(name, btn);
      friendList.appendChild(btn);
    });

    function pickFriend(name, btnEl) {
      if (turnIndex >= pickSequence.length) return;

      const team = pickSequence[turnIndex];
      let slot;

      if (team === 'blue') {
        const slots = blueSlots.querySelectorAll('.slot');
        if (blueCount >= 9) return;
        slot = slots[blueCount++];
        slot.classList.add('filled-blue');
      } else {
        const slots = redSlots.querySelectorAll('.slot');
        if (redCount >= 9) return;
        slot = slots[redCount++];
        slot.classList.add('filled-red');
      }

      slot.innerText = name;
      btnEl.classList.add('selected');

      // Undo 저장
      undoStack.push({
        team,
        slot,
        friendName: name,
        friendEl: btnEl
      });

      turnIndex++;
      updateTurnInfo();
    }

    function updateTurnInfo() {
      if (turnIndex < pickSequence.length) {
        const nextTeam = pickSequence[turnIndex] === 'blue' ? '환팀' : '형곤팀';
        turnInfo.innerText = `${nextTeam}의 차례입니다`;
      } else {
        turnInfo.innerText = '모든 픽이 완료되었습니다!';
      }
    }

    function undoPick() {
      if (undoStack.length === 0) return;

      const last = undoStack.pop();
      last.slot.innerText = '슬롯';
      last.slot.classList.remove('filled-blue', 'filled-red');
      last.friendEl.classList.remove('selected');

      turnIndex--;
      if (last.team === 'blue') blueCount--;
      else redCount--;

      updateTurnInfo();
    }
  </script>
<style>
  body {
    position: relative;
    background-color: #121212;
    color: white;
    font-family: 'Segoe UI', sans-serif;
    margin: 0;
    padding: 0;
    overflow-x: hidden;
  }

  body::before {
    content: "";
    position: fixed;
    top: 0; left: 0;
    width: 100%;
    height: 100%;
    background: url('KakaoTalk_20250724_205159462.png') no-repeat center center;
    background-size: cover;
    opacity: 0.1; /* 투명도 조절 */
    z-index: -1;
  }
</style>
</body>
</html>
